# 高并发秒杀系统 (Seckill System)

一个基于 Spring Boot + MyBatis-Plus + Redis 的高并发秒杀项目后端，采用 Redis + Lua 脚本解决超卖问题。

## 技术栈
* Spring Boot 2.7.18
* MyBatis-Plus 3.5.8
* MySQL 8.0
* Redis 6.0+
* Maven 3.6+

---

## V2.0 版本 ✅ (当前版本)

### 🎯 核心特性
* **解决超卖问题：** 引入 Redis + Lua 脚本实现原子性库存扣减
* **防重复抢购：** 基于 Redis Set 防止同一用户重复下单
* **高性能缓存：** 库存预热机制，减少数据库压力
* **事务回滚：** 异常时自动回滚 Redis 操作
* **用户随机化：** 随机生成用户 ID，避免测试重复

### 📈 性能表现
* **并发能力：** 支持 200+ 并发用户同时秒杀
* **数据一致性：** 零超卖，库存扣减准确
* **响应速度：** Redis 缓存毫秒级响应

### 🧪 测试结果
* **200并发测试：** 10件库存 → 10个订单，0超卖 ✅
* **重复购买测试：** 同一用户只能购买一次 ✅
* **库存一致性：** 数据库与缓存库存完全一致 ✅

---

## V1.0 版本 ❌ (历史版本)

### 已知问题 (JMeter 压测复现)
* **严重超卖：** 200 并发抢 10 件库存，导致创建了 200 个订单。
* **库存错误：** `stock_count` 被错误地扣减为 9 (应为 0)。
* **根本原因：** `select` 和 `update` 之间的竞态条件 (Race Condition) 导致。